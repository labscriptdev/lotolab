var D=Object.defineProperty;var G=(u,s,e)=>s in u?D(u,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[s]=e;var h=(u,s,e)=>(G(u,typeof s!="symbol"?s+"":s,e),e);import{i as _,t as l,v as c,z as p,A as a,N as $,x as n,O as J,P as V,Q as O,c as A,R as E,S as b,T as v,U as g,B as w,V as x,y as S,W as k,X as L}from"./entry.3QWt4LMD.js";import{u as Q}from"./useAxios.gQAVvTva.js";const U={class:"bg-surface"},W={__name:"table-virtual",props:{items:{type:Array,default:()=>[]},height:{type:String,default:"400px"},density:{type:String,default:"default"},zebra:{type:[Boolean,Array],default:!1}},emits:["update:modelValue"],setup(u,{emit:s}){const e=u,r=t=>{if(!e.zebra)return null;let i=["transparent","#0000000f"];return Array.isArray(e.zebra)&&(i=e.zebra),`background-color: ${i[t%i.length]};`};return(t,i)=>{const d=_("v-table"),f=_("v-virtual-scroll");return l(),c("div",U,[p(d,{density:e.density,style:{"margin-right":"14px"}},{default:a(()=>[n("colgroup",null,[$(t.$slots,"colgroup")]),n("thead",null,[n("tr",null,[$(t.$slots,"header")])])]),_:3},8,["density"]),p(f,{height:e.height,items:e.items},{default:a(N=>[p(d,{density:e.density},{default:a(()=>[n("colgroup",null,[$(t.$slots,"colgroup")]),n("tbody",null,[n("tr",{style:J(r(N.index))},[$(t.$slots,"row",O(V(N)))],4)])]),_:2},1032,["density"])]),_:3},8,["height","items"])])}}};class C{constructor(s={},e=[]){h(this,"name","");h(this,"type","warning");h(this,"message","");h(this,"goods",[]);h(this,"bads",[])}intersection(s,e){return s=new Set(s),e=new Set(e),[...new Set([...s].filter(r=>e.has(r)))]}difference(s,e){return s=new Set(s),e=new Set(e),[...new Set([...[...s].filter(r=>!e.has(r)),...[...e].filter(r=>!s.has(r))])]}}class X extends C{constructor(e={},r=[]){super();h(this,"name","Sorteio já feito");if(r.length<3)return;let t=e.data.filter(i=>i.numbers.filter(d=>r.includes(d)).length==r.length);if(t.length!=0){if(this.type="error",t.length==1){this.message=`Os números selecionados saíram uma vez no sorteio ${t[0].number} sorteios`;return}this.message=`Os números selecionados saíram em ${t.length} sorteios`}}}class q extends C{constructor(e={},r=[]){super();h(this,"name","Sem números de borda");if(r.length==0)return;const t=this.getBorderNumbers(e),i=this.intersection(t,r);i.length<2&&(this.message=`Geralmente, um sorteio contém pelo menos 2 números de borda. Você selecionou ${i.length}`)}getBorderNumbers(e){let r=[];for(let t=e.rangeStart;t<=e.rangeFinal;t++)(t<e.rangePerRow||t%10==1||t%10==0||t>=e.rangeFinal-e.rangePerRow+1)&&r.push(t);return r.map(t=>String(t).padStart(2,"0"))}}class I extends C{constructor(e={},r=[]){super();h(this,"name","Saíram nos últimos 3 sorteios");let t={};e.data.filter((i,d)=>d<=2).map(i=>{i.numbers.map(d=>{t[d]=t[d]||0,t[d]++})});for(let i in t)t[i]<=1&&delete t[i];t=Object.keys(t).map(i=>String(i).padStart(2,"0")),this.bads=this.intersection(t,r)}}const K=(u={})=>{u={type:"mega-sena",...u};const s=Q({method:"get",url:`https://raw.githubusercontent.com/labscriptdev/static-api/main/data/loteria/${u.type}.json`,autoSubmit:!0,response:{data:[]},filters:{response(e){return e.data.data=e.data.data.reverse().map(r=>(r.numbers=r.numbers.map(t=>s.padStart(t,2,"0")),r)),e}},numbers:[],numberToggle(e){const r=this.numbers.indexOf(e);r>=0?this.numbers.splice(r,1):this.numbers.push(e)},numbersSet(e){this.numbers=JSON.parse(JSON.stringify(e))},padStart(e){return String(e).padStart(2,"0")},table:A(()=>{let e=[],r=[];for(let t=s.response.rangeStart;t<=s.response.rangeFinal;t++)r.push(s.padStart(t)),r.length==s.response.rangePerRow&&(e.push(r),r=[]);return e}),analisys:A(()=>[new X(s.response,s.numbers),new q(s.response,s.numbers),new I(s.response,s.numbers)].filter(e=>e.message||e.goods.length>0||e.bads.length>0))});return s},Y={class:"pa-1"},Z=["onClick"],ee=n("br",null,null,-1),te={class:"d-flex justify-end",style:{gap:"15px"}},se=n("br",null,null,-1),re={class:"d-flex flex-column",style:{gap:"10px"}},ne=["innerHTML"],le=["innerHTML"],oe={key:2,class:"d-flex flex-wrap mt-1",style:{gap:"5px"}},ae={key:3,class:"d-flex flex-wrap mt-1",style:{gap:"5px"}},ie=n("col",{width:"80px"},null,-1),ue=n("col",{width:"150px"},null,-1),de=n("col",{width:"*"},null,-1),ce=n("col",{width:"50px"},null,-1),me=n("th",null,"Sorteio",-1),pe=n("th",null,"Data",-1),_e=n("th",null,"Números",-1),ge=n("th",null,"Ações",-1),he={class:"d-flex flex-wrap",style:{gap:"6px",padding:"4px"}},fe={class:"d-flex"},xe={__name:"[slug]",setup(u){const s=E(),e=K({type:s.params.slug}),r=async()=>{const d=await navigator.clipboard.readText();e.numbers=d.split(/[^0-9]/).filter(f=>!!f).map(e.padStart)},t={VBtn:{flat:!0,size:35}},i=d=>({selectAll:{icon:"material-symbols:text-select-jump-to-beginning-rounded",title:"Selecionar tudo",onClick(){e.numbersSet(d.item.numbers)}}});return(d,f)=>{const N=_("v-table"),y=_("v-btn"),P=_("v-alert"),T=_("v-card-text"),R=_("v-card"),B=_("v-col"),j=_("v-tooltip"),M=_("v-defaults-provider"),F=W,H=_("v-row");return l(),c("div",null,[p(H,null,{default:a(()=>[p(B,{cols:"12",md:"5"},{default:a(()=>[p(R,{elevation:"0"},{default:a(()=>[p(T,null,{default:a(()=>[p(N,null,{default:a(()=>[n("tbody",null,[(l(!0),c(b,null,v(g(e).table,o=>(l(),c("tr",null,[(l(!0),c(b,null,v(o,m=>(l(),c("td",Y,[n("div",{style:{cursor:"pointer"},class:L(["pa-2 text-center rounded bg-grey-lighten-3",{"bg-primary":g(e).numbers.includes(m)}]),onClick:z=>g(e).numberToggle(m)},S(m),11,Z)]))),256))]))),256))])]),_:1}),ee,n("div",te,[p(y,{color:"primary",onClick:f[0]||(f[0]=o=>r())},{default:a(()=>[w("Colar")]),_:1}),p(y,{color:"primary",onClick:f[1]||(f[1]=o=>g(e).numbers=[]),disabled:g(e).numbers.length==0},{default:a(()=>[w("Limpar")]),_:1},8,["disabled"])]),se,n("div",re,[(l(!0),c(b,null,v(g(e).analisys,o=>(l(),x(P,{type:o.type},{default:a(()=>[o.message?k("",!0):(l(),c("div",{key:0,innerHTML:o.name},null,8,ne)),o.message?(l(),c("div",{key:1,innerHTML:o.message},null,8,le)):k("",!0),o.goods.length>0?(l(),c("div",oe,[(l(!0),c(b,null,v(o.goods,m=>(l(),x(y,{color:"success",elevation:"0"},{default:a(()=>[w(S(m),1)]),_:2},1024))),256))])):k("",!0),o.bads.length>0?(l(),c("div",ae,[(l(!0),c(b,null,v(o.bads,m=>(l(),x(y,{color:"error",elevation:"0"},{default:a(()=>[w(S(m),1)]),_:2},1024))),256))])):k("",!0)]),_:2},1032,["type"]))),256))])]),_:1})]),_:1})]),_:1}),p(B,{cols:"12",md:"7"},{default:a(()=>[g(e).response.data[0]?(l(),x(F,{key:0,density:"compact",items:g(e).response.data,height:"80vh",zebra:!0},{colgroup:a(o=>[ie,ue,de,ce]),header:a(o=>[me,pe,_e,ge]),row:a(o=>[n("td",null,S(o.item.number),1),n("td",null,S(o.item.date),1),n("td",null,[n("div",he,[(l(!0),c(b,null,v(o.item.numbers,m=>(l(),x(y,{color:"grey-lighten-3",elevation:"0",onClick:z=>g(e).numberToggle(m),class:L({"bg-primary":g(e).numbers.includes(m)})},{default:a(()=>[w(S(m),1)]),_:2},1032,["onClick","class"]))),256))])]),n("td",null,[n("div",fe,[p(M,{defaults:t},{default:a(()=>[(l(!0),c(b,null,v(i(o),m=>(l(),x(j,{text:m.title||null},{activator:a(z=>[p(y,O(V({...m,...z.props})),null,16)]),_:2},1032,["text"]))),256))]),_:2},1024)])])]),_:1},8,["items"])):k("",!0)]),_:1})]),_:1})])}}};export{xe as default};
